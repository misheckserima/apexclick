<template>
  <div>
    <CornerPopup />
    
    <!-- Home Section -->
    <section id="home" class="home">
      <div class="overlay"></div>
      <div class="hero-content" style="z-index: 1000; position: relative; text-align: center; max-width: 900px; margin: 0 auto; padding: 0 2rem;">
        <h1 style="font-size: 4.5rem; margin-bottom: 1.5rem; color: #fff; text-shadow: 0 2px 10px rgba(0,0,0,0.3);">ApexClick</h1>
        <h2 style="font-size: 2.5rem; color: #00ffff; margin-bottom: 2rem; text-shadow: 0 2px 5px rgba(0,0,0,0.2);">
          Transform Your Digital Presence
        </h2>
        <p style="font-size: 1.6rem; color: #e0e0e0; margin-bottom: 2.5rem; line-height: 1.6;">
          We craft powerful digital experiences that drive growth and engagement. Our full-service digital marketing agency specializes in creating stunning websites, 
          strategic social media campaigns, and data-driven marketing solutions tailored to your business needs.
        </p>
        <div class="cta-buttons" style="display: flex; gap: 1.5rem; justify-content: center; flex-wrap: wrap;">
          <a href="#services" class="btn" style="background: #00ffff; color: #0f3460; padding: 1rem 2.5rem; border-radius: 50px; font-weight: 600; text-transform: uppercase; letter-spacing: 1px; transition: all 0.3s ease;">
            Our Services
          </a>
          <a href="https://www.facebook.com/share/15gX6w1rsb/" target="_blank" class="btn" style="background: transparent; border: 2px solid #00ffff; color: #fff; padding: 1rem 2.5rem; border-radius: 50px; font-weight: 600; text-transform: uppercase; letter-spacing: 1px; transition: all 0.3s ease;">
            Get Started
          </a>
        </div>
      </div>
      <div style="z-index: 1000" class="circuit-animation circuit1">
        <div class="promotion-text" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-family: 'Poppins', sans-serif; font-size: 1.1rem; font-weight: 600; color: #2c3e50; text-align: center;">
          <div class="text-line" style="margin: 5px 0; opacity: 0; animation: professionalText 4s ease-in-out infinite;">STARTUP PROMOTION</div>
          <div class="text-line" style="margin: 5px 0; opacity: 0; animation: professionalText 4s ease-in-out infinite 0.8s;">50% OFF ALL SERVICES</div>
          <div class="text-line" style="margin: 5px 0; opacity: 0; animation: professionalText 4s ease-in-out infinite 1.6s;">LIMITED TIME OFFER</div>
        </div>
      </div>
      <div style="z-index: 1000" class="circuit-animation circuit2"></div>
      <div style="z-index: 1000" class="digital-tools digital1"></div>
      <div style="z-index: 1000" class="digital-tools digital2"></div>
    </section>

    <!-- About Section -->
    <section class="about" id="about" style="min-height: 35vh">
      <h1 class="heading">About Us</h1>
      <div class="row">
        <div class="content">
          <h3>Leaders in Digital Marketing and Online Presence</h3>
          <p>
            ApexClick specializes in creating innovative and
            high-quality digital marketing solutions. Our team of experienced designers
            and digital strategists are dedicated to bringing our clients' visions to
            life, ensuring every detail is perfected. From cutting-edge websites to
            strategic social media campaigns, we provide a full range of solutions to meet
            all your digital marketing needs across the USA.
          </p>
        </div>
      </div>
    </section>

    <!-- Services Section -->
    <div class="pt-5 pb-5 services-section" id="services">
      <div class="container">
        <div class="row">
          <div class="section-head col-sm-12" id="service">
            <h1 class="fade-in">Our Services</h1>
            <p class="fade-in">
              At ApexClick, we specialize in crafting high-quality,
              innovative digital marketing solutions. Our expertise lies in designing and
              implementing digital strategies that enhance both online presence
              and business growth.
            </p>
          </div>
          <div 
            v-for="(service, index) in services" 
            :key="service.id"
            class="col-lg-4 col-sm-6 service-item"
            :ref="el => { if (el) serviceItems[index] = el }"
            :class="{ 'visible': isServiceVisible[index] }"
          >
            <div class="item">
              <div class="service-image">
                <img :src="service.image" :alt="service.alt" />
              </div>
              <h6>{{ service.title }}</h6>
              <p>{{ service.description }}</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Achievements Section -->
    <section class="counters">
      <div class="achievements-header">
        <h2 class="achievements-title">Our Achievements at a Glance</h2>
        <p class="achievements-subtitle">Delivering excellence in digital marketing solutions</p>
      </div>
      <div class="achievements-container">
        <div 
          v-for="achievement in achievements" 
          :key="achievement.id"
          class="achievement-item"
        >
          <div class="achievement-icon">
            <i :class="achievement.icon"></i>
          </div>
          <div class="counter" :data-target="achievement.target">0</div>
          <h3 class="achievement-label">{{ achievement.label }}</h3>
        </div>
      </div>
    </section>

    <!-- Team Section -->
    <section class="team" style="margin-top: 7rem">
      <h1 class="heading" style="margin-top: 3rem" id="team">Our Team</h1>
      <p style="font-size: 2rem; color: white; margin-bottom: 20px">
        Meet the visionary leaders behind ApexClick, dedicated to transforming businesses through innovative digital marketing solutions and cutting-edge technology.
      </p>
      <div class="row">
        <div 
          v-for="member in teamMembers" 
          :key="member.id"
          class="col-lg-4 col-md-6 mb-4"
        >
          <div class="card">
            <div class="image">
              <img :src="member.image" :alt="member.alt" />
            </div>
            <div class="info">
              <h3>{{ member.name }}</h3>
              <span>{{ member.position }}</span>
              <div class="icons">
                <a :href="member.socialLinks.facebook" class="fa fa-facebook"></a>
                <a :href="member.socialLinks.twitter" class="fa fa-twitter"></a>
                <a :href="member.socialLinks.instagram" class="fa fa-instagram"></a>
                <a :href="member.socialLinks.linkedin" class="fa fa-linkedin"></a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- FAQ Section -->
    <section class="faq">
      <h1 class="heading" style="margin-top: 1rem; color: #00bfff" id="faq">
        Frequently-Asked Questions
      </h1>
      <div class="row">
        <div class="accordion-container">
          <div 
            v-for="faq in faqs" 
            :key="faq.id"
            class="accordion"
          >
            <div class="accordion-header" @click="toggleAccordion(faq.id)">
              <span>{{ activeAccordion === faq.id ? '-' : '+' }}</span>
              <h3 style="color: white">{{ faq.question }}</h3>
            </div>
            <div 
              class="accordion-body" 
              :style="{ display: activeAccordion === faq.id ? 'block' : 'none' }"
            >
              <p>{{ faq.answer }}</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Newsletter Section -->
    <section class="newsletter-section">
      <div class="container">
        <h2 style="text-align: center; color: #fff; margin-bottom: 2rem; font-size: 2.5rem;">Stay Updated</h2>
        <p style="text-align: center; color: #e0e0e0; max-width: 700px; margin: 0 auto 3rem; font-size: 1.2rem; line-height: 1.6;">
          Subscribe to our newsletter for the latest updates, digital marketing tips, and exclusive offers delivered straight to your inbox.
        </p>
        <NewsletterSignup />
      </div>
    </section>
  </div>
</template>

<script setup lang="ts">
import { ref, onMounted, onUnmounted, nextTick } from 'vue';
import NewsletterSignup from '@/components/NewsletterSignup.vue';

// Interfaces
type Service = {
  id: string;
  title: string;
  description: string;
  icon?: string;
  image?: string;
  alt?: string;
};

type TeamMember = {
  id: string;
  name: string;
  position: string;
  bio: string;
  image: string;
  alt?: string;
  socialLinks: {
    facebook: string;
    twitter: string;
    instagram: string;
    linkedin: string;
  };
};

type FAQ = {
  id: string;
  question: string;
  answer: string;
};

type Achievement = {
  id: string;
  icon: string;
  target: number;
  label: string;
};

// Refs
const activeAccordion = ref<string | null>(null);
const serviceItems = ref<HTMLElement[]>([]);
const featuredServiceItems = ref<HTMLElement[]>([]);
const isServiceVisible = ref<boolean[]>([]);
const isFeaturedServiceVisible = ref<boolean[]>([]);
let observer: IntersectionObserver | null = null;

// Data
const services = ref<Service[]>([
  {
    id: '1',
    title: 'Business Website Development',
    description: 'Create professional business websites, engaging blogs, and stunning portfolios that captivate your audience and drive conversions. Our expert developers craft custom solutions that blend functionality with modern design, ensuring your digital presence stands out.',
    image: '/images/web-dev-icon.png',
    alt: 'Website Development'
  },
  // Add other services here
]);

const featuredServices = ref<Service[]>([
  {
    id: '1',
    title: 'Email Marketing Automation',
    description: 'We design and implement sophisticated email marketing campaigns that nurture leads and retain customers throughout their journey.',
    image: '/images/email-marketing-icon.png',
    alt: 'Email Marketing'
  },
  // Add other featured services here
]);

const teamMembers = ref<TeamMember[]>([
  {
    id: '1',
    name: 'Misheck Serima',
    position: 'Founder, CEO, Project Manager, Developer & Digital Marketing Agent',
    bio: 'Visionary leader with expertise in digital strategy and technology innovation.',
    image: '/images/team/member1.jpg',
    alt: 'Misheck Serima',
    socialLinks: {
      facebook: '#',
      twitter: '#',
      instagram: '#',
      linkedin: '#'
    }
  },
  // Add other team members here
]);

const faqs = ref<FAQ[]>([
  {
    id: '1',
    question: 'What digital marketing services do you offer?',
    answer: 'We specialize in a comprehensive range of digital marketing services including website development, social media management, SEO optimization, content marketing, PPC advertising, and email marketing automation.'
  },
  // Add other FAQs here
]);

const achievements = ref<Achievement[]>([
  {
    id: '1',
    icon: 'fas fa-project-diagram',
    target: 150,
    label: 'Projects Completed'
  },
  // Add other achievements here
]);

// Methods
const toggleAccordion = (id: string) => {
  activeAccordion.value = activeAccordion.value === id ? null : id;
};

const getAnimationClass = (index: number): string => {
  return `fade-in`;
};

// Initialize visibility arrays
const initializeVisibilityArrays = () => {
  isServiceVisible.value = new Array(services.value.length).fill(false);
  isFeaturedServiceVisible.value = new Array(featuredServices.value.length).fill(false);
};

// Initialize intersection observer
const initIntersectionObserver = () => {
  const options = {
    root: null,
    rootMargin: '0px',
    threshold: 0.1
  };

  observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        const index = serviceItems.value.findIndex(el => el === entry.target);
        if (index !== -1) {
          isServiceVisible.value[index] = true;
        }
        
        const featuredIndex = featuredServiceItems.value.findIndex(el => el === entry.target);
        if (featuredIndex !== -1) {
          isFeaturedServiceVisible.value[featuredIndex] = true;
        }
      }
    });
  }, options);

  // Observe service items
  serviceItems.value.forEach(item => {
    if (item) observer?.observe(item);
  });

  // Observe featured service items
  featuredServiceItems.value.forEach(item => {
    if (item) observer?.observe(item);
  });
};

// Lifecycle hooks
onMounted(async () => {
  initializeVisibilityArrays();
  await nextTick();
  initIntersectionObserver();
});

onUnmounted(() => {
  if (observer) {
    observer.disconnect();
  }
});
</script>

<style scoped>
/* Base Styles */
:root {
  --primary-color: #00ffff;
  --secondary-color: #0f3460;
  --text-color: #333;
  --light-bg: #f8f9fa;
  --dark-bg: #1a1a2e;
  --transition: all 0.3s ease;
}

/* Section Styling */
section {
  padding: 5rem 0;
  position: relative;
  overflow: hidden;
}

.heading {
  font-size: 3.5rem;
  text-align: center;
  color: var(--primary-color);
  margin-bottom: 3rem;
  position: relative;
  text-transform: uppercase;
  letter-spacing: 2px;
}

/* Home Section */
.home {
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  background: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)), 
              url('/images/hero-bg.jpg') no-repeat center center/cover;
  position: relative;
  color: white;
  text-align: center;
}

/* Services Section */
.services-section {
  background-color: var(--light-bg);
  padding: 5rem 0;
}

.service-item {
  margin-bottom: 2rem;
  opacity: 0;
  transform: translateY(20px);
  transition: opacity 0.6s ease, transform 0.6s ease;
}

.service-item.visible {
  opacity: 1;
  transform: translateY(0);
}

/* Team Section */
.team {
  background-color: var(--dark-bg);
  color: white;
  padding: 5rem 0;
}

.team .card {
  background: rgba(255, 255, 255, 0.1);
  border-radius: 10px;
  overflow: hidden;
  transition: var(--transition);
  height: 100%;
}

.team .card:hover {
  transform: translateY(-10px);
  box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
}

/* FAQ Section */n.faq {
  padding: 5rem 0;
  background-color: var(--light-bg);
}

.accordion {
  margin-bottom: 1rem;
  border-radius: 8px;
  overflow: hidden;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
}

.accordion-header {
  background-color: var(--secondary-color);
  color: white;
  padding: 1.5rem;
  cursor: pointer;
  display: flex;
  justify-content: space-between;
  align-items: center;
  transition: var(--transition);
}

.accordion-header:hover {
  background-color: #0d2c4a;
}

.accordion-body {
  background-color: white;
  padding: 0;
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.3s ease;
}

.accordion-body p {
  padding: 1.5rem;
  margin: 0;
  color: var(--text-color);
}

/* Newsletter Section */
.newsletter-section {
  background: linear-gradient(135deg, #1a237e 0%, #283593 100%);
  padding: 5rem 1rem;
  margin-top: 5rem;
  position: relative;
  overflow: hidden;
}

.newsletter-section::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiPjxkZWZzPjxwYXR0ZXJuIGlkPSJwYXR0ZXJuIiB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHBhdHRlcm5Vbml0cz0idXNlclNwYWNlT25Vc2UiIHBhdHRlcm5UcmFuc2Zvcm09InJvdGF0ZSg0NSkiPjxyZWN0IHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0icmdiYSgyNTUsMjU1LDI1NSwwLjA1KSIvPjwvcGF0dGVybj48L2RlZnM+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0idXJsKCNwYXR0ZXJuKSIvPjwvc3ZnPg==');
  opacity: 0.3;
  z-index: 0;
}

/* Responsive Design */
@media (max-width: 991.98px) {
  .services-section, .featured-services-section {
    padding: 4rem 0;
  }
  
  .heading {
    font-size: 2.5rem;
  }
  
  .team .card {
    margin-bottom: 2rem;
  }
}

@media (max-width: 767.98px) {
  .home h1 {
    font-size: 3rem;
  }
  
  .home h2 {
    font-size: 1.8rem;
  }
  
  .cta-buttons {
    flex-direction: column;
    gap: 1rem !important;
  }
  
  .cta-buttons .btn {
    width: 100%;
    text-align: center;
  }
}

/* Animations */
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes professionalText {
  0%, 100% { opacity: 0; transform: translateY(20px); }
  20%, 80% { opacity: 1; transform: translateY(0); }
}

.fade-in {
  animation: fadeIn 1s ease forwards;
}

/* Utility Classes */
.container {
  width: 100%;
  padding-right: 15px;
  padding-left: 15px;
  margin-right: auto;
  margin-left: auto;
}

.row {
  display: flex;
  flex-wrap: wrap;
  margin-right: -15px;
  margin-left: -15px;
}

.col-lg-4, .col-md-6, .col-sm-12 {
  position: relative;
  width: 100%;
  padding-right: 15px;
  padding-left: 15px;
}

@media (min-width: 576px) {
  .col-sm-6 {
    flex: 0 0 50%;
    max-width: 50%;
  }
}

@media (min-width: 768px) {
  .col-md-6 {
    flex: 0 0 50%;
    max-width: 50%;
  }
  
  .col-md-4 {
    flex: 0 0 33.333333%;
    max-width: 33.333333%;
  }
}

@media (min-width: 992px) {
  .col-lg-4 {
    flex: 0 0 33.333333%;
    max-width: 33.333333%;
  }
  
  .col-lg-3 {
    flex: 0 0 25%;
    max-width: 25%;
  }
}
</style>
